<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>kubernetes_logs_for_responders | JellyParks</title><meta name=keywords content="containers,linux,dfir,kubernetes"><meta name=description content="An overview of the Kubernetes api logs. What fields are useful, and some places where log visibility might be missing in most environments."><meta name=author content="Travis"><link rel=canonical href=https://jellyparks.com/posts/k8s-api-logs-for-responders/><link crossorigin=anonymous href=/assets/css/stylesheet.min.9a6093ef6721cb73f74fc97e7e73df4d4e4d54b53acb6508b554b48f5f75b49a.css integrity="sha256-mmCT72chy3P3T8l+fnPfTU5NVLU6y2UItVS0j191tJo=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://jellyparks.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jellyparks.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://jellyparks.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://jellyparks.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://jellyparks.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-13VPCR43BS"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-13VPCR43BS",{anonymize_ip:!1})}</script><meta property="og:title" content="kubernetes_logs_for_responders"><meta property="og:description" content="An overview of the Kubernetes api logs. What fields are useful, and some places where log visibility might be missing in most environments."><meta property="og:type" content="article"><meta property="og:url" content="https://jellyparks.com/posts/k8s-api-logs-for-responders/"><meta property="og:image" content="https://jellyparks.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-11T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-11T00:00:00+00:00"><meta property="og:site_name" content="JellyParks"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jellyparks.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="kubernetes_logs_for_responders"><meta name=twitter:description content="An overview of the Kubernetes api logs. What fields are useful, and some places where log visibility might be missing in most environments."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://jellyparks.com/posts/"},{"@type":"ListItem","position":3,"name":"kubernetes_logs_for_responders","item":"https://jellyparks.com/posts/k8s-api-logs-for-responders/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"kubernetes_logs_for_responders","name":"kubernetes_logs_for_responders","description":"An overview of the Kubernetes api logs. What fields are useful, and some places where log visibility might be missing in most environments.","keywords":["containers","linux","dfir","kubernetes"],"articleBody":" An overview of the Kubernetes api logs. What fields are useful, and some places where log visibility might be missing in most environments.\nK8s Api Audit logs There are several log sources in a Kubernetes environment. One of the best sources to use during an incident to determine what has occurred on a cluster are the api audit logs. These logs contain all of the requests made to query or modify objects in the cluster. On the surface the api audit logs can be a bit overwhelming. Much like any log source, the more you look at it and the more you work with it the easier it becomes to quickly digest the event data. As a responder there are a few fields we will want to pay attention to: requestURI, sourceIPs, verb, user.username, userAgent.\nfield purpose requestURI This is the resource requested answering the ‘what’ was requested sourceip Where the request came from verb Answers the question was this creating/modifying a resource or querying information about a resource user.username ‘who’ made the request userAgent This is the user agent of the application that made the request responseStatus.code annotations.authorization.k8s.io/decision rbac decision, allow/forbid annotations.authorization.k8s.io/reason Description on why a request was allowed user.extra.authentication.kubernetes.io/pod-name pod where request originated user.extra.authentication.kubernetes.io/pod-uid pod uid where request originated Below is a sample api audit log event.\n{ annotations: { authorization.k8s.io/decision: allow authorization.k8s.io/reason: RBAC: allowed by ClusterRoleBinding \"cluster-system-anonymous\" of ClusterRole \"cluster-admin\" to User \"system:anonymous\" } apiVersion: audit.k8s.io/v1 auditID: 5dbc599e-0726-45ae-a2e7-b1fb06c6e6f9 kind: Event level: Metadata objectRef: { apiVersion: v1 resource: secrets } requestReceivedTimestamp: 2022-06-17T12:01:14.222991Z requestURI: /api/v1/secrets responseStatus: { code: 200 metadata: { } } sourceIPs: [ 172.20.39.107 ] stage: ResponseComplete stageTimestamp: 2022-06-17T12:01:14.246392Z user: { groups: [ system:unauthenticated ] username: system:anonymous } userAgent: curl/7.68.0 verb: list } Digging into the event a bit we know the verb is list which tells us that this request is attempting to query data from the server. The username is system:anonymous which means no authentication was performed. The requestURI is api/v1/secrets, this api endpoint is used when attempting to retrieve all of the secrets from every namespace. If the requestURI was api/v1/namespaces/test/secrets then it would have been an attempt to just query secrets from the test namespace.\nThe responseStatus.code value is a 200, just like any other web response code a 200 means success. The two fields under annotations authorization.k8s.io/decision, authorization.k8s.io/reason tell us that the request was authorized from a RBAC pov. The reason goes into further detail of why it was allowed informing us that the ClusterRole cluster-admin is associated with the system:anonymous user via the ClusterRoleBinding cluster-system-anonymous\nWe can see the sourceIP is 172.20.39.107 which happens to be our load balancer in this scenario. If the request was internal to the cluster, it would have had an internal ip of the node the request originated from. This is important to note because in the event of malicious activity originating within a cluster which is also using the anonymous account, sourcing the k8s api requests back to the node is typically as close as you can get to answering “where” a request came from using the api audit logs. However, if a service account is being used the event will show the exact pod the request originated from as long as are current version of Kubernetes is being utilized. Older versions may not show this level of detail in the log output.\nThe userAgent value is curl/7.68.0. This field can easily be spoofed which makes it hard to trust that curl was used. However, it can often be used to link events together to understand activity originating from the same actor.\nBy using this information, we can infer the request more than likely originated from outside the cluster and the command used to make the request was something similar to this:\ncurl -k https:///api/v1/secrets Let’s take a look at one more log output:\n{ annotations: { authorization.k8s.io/decision: forbid authorization.k8s.io/reason: } apiVersion: audit.k8s.io/v1 auditID: 4190c06f-5bb4-4654-a610-02af06ac0593 kind: Event level: RequestResponse objectRef: { apiVersion: v1 namespace: dev resource: pods } requestReceivedTimestamp: 2022-06-18T18:50:08.978700Z requestURI: /api/v1/namespaces/dev/pods?limit=500 responseObject: { apiVersion: v1 code: 403 details: { kind: pods } kind: Status message: pods is forbidden: User \"system:serviceaccount:dev:default\" cannot list resource \"pods\" in API group \"\" in the namespace \"dev\" metadata: { } reason: Forbidden status: Failure } responseStatus: { code: 403 metadata: { } reason: Forbidden status: Failure } sourceIPs: [ 172.20.59.66 ] stage: ResponseComplete stageTimestamp: 2022-06-18T18:50:08.979502Z user: { extra: { authentication.kubernetes.io/pod-name: [ nettools ] authentication.kubernetes.io/pod-uid: [ 340ea116-a70a-463c-90e8-f7819acf034f ] } groups: [ system:serviceaccounts system:serviceaccounts:dev system:authenticated ] uid: eb04ad0d-29d6-4ea0-8df5-d666b26eebf9 username: system:serviceaccount:dev:default } userAgent: kubectl/v1.24.2 (linux/amd64) kubernetes/f66044f verb: list } As we look through the event details, we can see that kubectl was used to query a list of pods within the dev namespace requestURI=/api/v1/namespaces/dev/pods?limit=500. The response was 403 because the service account (found in the user.username field) system:serviceaccount:dev:default does not have permissions to query for a list of pods within the dev namespace. There are some new fields in this event which help us to quickly identify which pod this took place in. Under the user section we see the following snip:\nThe information in the extras section tells us the exact pod that was used. Since we know the pod name as well as the pod-uid it provides us the opportunity to check the Kubernetes server to determine if the pod is still running. If it is, could snapshot the underlying containers in the pod for further analysis.\nBased on the information in the audit log it would appear the command used to create the event was similar to:\n./kubectl get pods -n dev And if we are lucky enough to have a 3rd part tool such as Falco or some other tool providing runtime detection capabilities we might have an alert such as this one to help confirm and validate our assumptions:\noutput_fields: { container.id: eddba1ff1c56 container.image.repository: docker.io/raesene/alpine-nettools container.image.tag: latest evt.time: 1655578208694767400 fd.name: 100.96.1.23:37794-\u003e100.64.0.1:443 k8s.ns.name: dev k8s.pod.name: nettools proc.cmdline: kubectl get pods -n dev } priority: Notice rule: Contact K8S API Server From Container Kubelet logs The kubelet is the control point for all the comings and goings on the node. Each node in the cluster will have a unique set of kubelet logs. Kubelet logs may be helpful when attempting to confirm when a particular container was started or removed. Depending on how it is configured the logs may have a lot of additional information available as well.\nThis page from RedHat has a handy reference chart for the different log levels available for the kubelet\nLog verbosity Description –v=0 Always visible to an Operator. –v=1 A reasonable default log level if you do not want verbosity. –v=2 Useful steady state information about the service and important log messages that might correlate to significant changes in the system. This is the recommended default log level. –v=3 Extended information about changes. –v=4 Debug level verbosity. –v=6 Display requested resources. –v=7 Display HTTP request headers. –v=8 Display HTTP request contents. At the time of writing kops deploys the kubelet with a default log level of 2 /usr/local/bin/kubelet ... --v=2 unless otherwise specified. Below are some sample events that show a container being removed, the nettools pod being removed, and then a few seconds later the nettools pod being created.\nJun 18 19:42:16 ip-172-20-59-66 kubelet[5656]: {\"ts\":1655581336241.7104,\"caller\":\"topologymanager/scope.go:110\",\"msg\":\"RemoveContainer\",\"v\":0,\"containerID\":\"9beafc9454c36cf07dec1793128629f2a80bb43ac65aac400458f44d398032a8\"} Jun 18 19:42:16 ip-172-20-59-66 kubelet[5656]: {\"ts\":1655581336244.2942,\"caller\":\"kubelet/kubelet.go:2102\",\"msg\":\"SyncLoop REMOVE\",\"v\":2,\"source\":\"api\",\"pods\":[{\"name\":\"nettools\",\"namespace\":\"dev\"}]} Jun 18 19:42:34 ip-172-20-59-66 kubelet[5656]: {\"ts\":1655581354264.5642,\"caller\":\"kubelet/kubelet.go:2092\",\"msg\":\"SyncLoop ADD\",\"v\":2,\"source\":\"api\",\"pods\":[{\"name\":\"nettools\",\"namespace\":\"dev\"}]} From a responder’s point of view, these logs are more than likely not the most helpful but may be a good reference point.\nhost logs / security tools Most hosts within a Kubernetes cluster are going to be Linux. This means that most if not all of the log sources traditionally used to analyze a Linux host can be used to help paint a picture of what has occurred on a compromised cluster. The same applies to 3rd party security tools. We briefly talked about Falco earlier, but other tools such has ossec, sysmon, osquery, and \u003c$$ VENDOR\u003e can all be used to gain more insights into the malicious activity. Please make sure to understand the limits of the tools though, especially when it comes to paid vendor solutions. A lot of the big players are much stronger in Windows and have gaps in visibility when it comes to *nix systems.\nOther places for logs Depending on how the cluster is configured, and what support applications are being utilized there could be several additional places with valuable log information. Does the cluster use a service mesh, are there proxy containers deployed into every pod for the most part? If so, the proxy containers are great source of logs potentially. If it appears to be a pod or application compromise, do not forget to review the application logs and the logs for the application pod if it is still around.\n","wordCount":"1457","inLanguage":"en","datePublished":"2022-06-11T00:00:00Z","dateModified":"2022-06-11T00:00:00Z","author":{"@type":"Person","name":"Travis"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jellyparks.com/posts/k8s-api-logs-for-responders/"},"publisher":{"@type":"Organization","name":"JellyParks","logo":{"@type":"ImageObject","url":"https://jellyparks.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jellyparks.com accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jellyparks.com/posts title=all_posts><span>all_posts</span></a></li><li><a href=https://jellyparks.com/categories/ title=categories><span>categories</span></a></li><li><a href=https://jellyparks.com/tags/ title=tags><span>tags</span></a></li><li><a href=https://jellyparks.com/me/ title=me><span>me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jellyparks.com>Home</a>&nbsp;»&nbsp;<a href=https://jellyparks.com/posts/>Posts</a></div><h1 class=post-title>kubernetes_logs_for_responders</h1><div class=post-meta><span title='2022-06-11 00:00:00 +0000 UTC'>June 11, 2022</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Travis&nbsp;|&nbsp;<a href=https://github.com/yogisec/yogisec.github.io/blob/main/content/posts/k8s-api-logs-for-responders/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#k8s-api-audit-logs aria-label="K8s Api Audit logs">K8s Api Audit logs</a></li><li><a href=#kubelet-logs aria-label="Kubelet logs">Kubelet logs</a></li><li><a href=#host-logs--security-tools aria-label="host logs / security tools">host logs / security tools</a></li><li><a href=#other-places-for-logs aria-label="Other places for logs">Other places for logs</a></li></ul></div></details></div><div class=post-content><hr><p>An overview of the Kubernetes api logs. What fields are useful, and some places where log visibility might be missing in most environments.</p><hr><h3 id=k8s-api-audit-logs>K8s Api Audit logs<a hidden class=anchor aria-hidden=true href=#k8s-api-audit-logs>#</a></h3><p>There are several log sources in a Kubernetes environment. One of the best sources to use during an incident to determine what has occurred on a cluster are the api audit logs. These logs contain <em>all</em> of the requests made to query or modify objects in the cluster. On the surface the api audit logs can be a bit overwhelming. Much like any log source, the more you look at it and the more you work with it the easier it becomes to quickly digest the event data. As a responder there are a few fields we will want to pay attention to: requestURI, sourceIPs, verb, user.username, userAgent.</p><table><thead><tr><th>field</th><th>purpose</th></tr></thead><tbody><tr><td>requestURI</td><td>This is the resource requested answering the &lsquo;what&rsquo; was requested</td></tr><tr><td>sourceip</td><td>Where the request came from</td></tr><tr><td>verb</td><td>Answers the question was this creating/modifying a resource or querying information about a resource</td></tr><tr><td>user.username</td><td>&lsquo;who&rsquo; made the request</td></tr><tr><td>userAgent</td><td>This is the user agent of the application that made the request</td></tr><tr><td>responseStatus.code</td><td></td></tr><tr><td>annotations.authorization.k8s.io/decision</td><td>rbac decision, allow/forbid</td></tr><tr><td>annotations.authorization.k8s.io/reason</td><td>Description on why a request was allowed</td></tr><tr><td>user.extra.authentication.kubernetes.io/pod-name</td><td>pod where request originated</td></tr><tr><td>user.extra.authentication.kubernetes.io/pod-uid</td><td>pod uid where request originated</td></tr></tbody></table><p>Below is a sample api audit log event.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=err>annotations:</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>     <span class=err>authorization.k8s.io/decision:</span> <span class=err>allow</span>
</span></span><span class=line><span class=cl>     <span class=err>authorization.k8s.io/reason:</span> <span class=err>RBAC:</span> <span class=err>allowed</span> <span class=err>by</span> <span class=err>ClusterRoleBinding</span> <span class=nt>&#34;cluster-system-anonymous&#34;</span> <span class=err>of</span> <span class=err>ClusterRole</span> <span class=s2>&#34;cluster-admin&#34;</span> <span class=err>to</span> <span class=err>User</span> <span class=s2>&#34;system:anonymous&#34;</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=err>apiVersion:</span> <span class=err>audit.k</span><span class=mi>8</span><span class=err>s.io/v</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>   <span class=err>auditID:</span> <span class=mi>5</span><span class=err>dbc</span><span class=mf>599e-0726</span><span class=mi>-45</span><span class=err>ae-a</span><span class=mf>2e7</span><span class=err>-b</span><span class=mi>1</span><span class=err>fb</span><span class=mi>06</span><span class=err>c</span><span class=mf>6e6</span><span class=err>f</span><span class=mi>9</span>
</span></span><span class=line><span class=cl>   <span class=err>kind:</span> <span class=err>Event</span>
</span></span><span class=line><span class=cl>   <span class=err>level:</span> <span class=err>Metadata</span>
</span></span><span class=line><span class=cl>   <span class=err>objectRef:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=err>apiVersion:</span> <span class=err>v1</span>
</span></span><span class=line><span class=cl>     <span class=err>resource:</span> <span class=err>secrets</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=err>requestReceivedTimestamp:</span> <span class=mi>2022-06-17</span><span class=err>T</span><span class=mi>12</span><span class=err>:</span><span class=mi>01</span><span class=err>:</span><span class=mf>14.222991</span><span class=err>Z</span>
</span></span><span class=line><span class=cl>   <span class=err>requestURI:</span> <span class=err>/api/v</span><span class=mi>1</span><span class=err>/secrets</span>
</span></span><span class=line><span class=cl>   <span class=err>responseStatus:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=err>code:</span> <span class=err>200</span>
</span></span><span class=line><span class=cl>     <span class=err>metadata:</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=err>}</span>
</span></span><span class=line><span class=cl>   <span class=err>sourceIPs:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>     <span class=mf>172.20</span><span class=err>.</span><span class=mf>39.107</span>
</span></span><span class=line><span class=cl>   <span class=p>]</span>
</span></span><span class=line><span class=cl>   <span class=err>stage:</span> <span class=err>ResponseComplete</span>
</span></span><span class=line><span class=cl>   <span class=err>stageTimestamp:</span> <span class=mi>2022-06-17</span><span class=err>T</span><span class=mi>12</span><span class=err>:</span><span class=mi>01</span><span class=err>:</span><span class=mf>14.246392</span><span class=err>Z</span>
</span></span><span class=line><span class=cl>   <span class=err>user:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=err>groups:</span> <span class=err>[</span>
</span></span><span class=line><span class=cl>       <span class=err>system:unauthenticated</span>
</span></span><span class=line><span class=cl>     <span class=err>]</span>
</span></span><span class=line><span class=cl>     <span class=err>username:</span> <span class=err>system:anonymous</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=err>userAgent:</span> <span class=err>curl/</span><span class=mf>7.68</span><span class=err>.</span><span class=mi>0</span>
</span></span><span class=line><span class=cl>   <span class=err>verb:</span> <span class=err>list</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></div><p>Digging into the event a bit we know the verb is <code>list</code> which tells us that this request is attempting to query data from the server. The username is <code>system:anonymous</code> which means no authentication was performed. The requestURI is <code>api/v1/secrets</code>, this api endpoint is used when attempting to retrieve all of the secrets from every namespace. If the requestURI was <code>api/v1/namespaces/test/secrets</code> then it would have been an attempt to just query secrets from the test namespace.</p><p>The responseStatus.code value is a <code>200</code>, just like any other web response code a 200 means success. The two fields under annotations <code>authorization.k8s.io/decision</code>, <code>authorization.k8s.io/reason</code> tell us that the request was authorized from a RBAC pov. The reason goes into further detail of why it was allowed informing us that the ClusterRole <code>cluster-admin</code> is associated with the <code>system:anonymous</code> user via the ClusterRoleBinding <code>cluster-system-anonymous</code></p><p>We can see the sourceIP is <code>172.20.39.107</code> which happens to be our load balancer in this scenario. If the request was internal to the cluster, it would have had an internal ip of the node the request originated from. This is important to note because in the event of malicious activity originating within a cluster which is also using the <code>anonymous</code> account, sourcing the k8s api requests back to the node is typically as close as you can get to answering &ldquo;where&rdquo; a request came from using the api audit logs. However, if a service account is being used the event will show the exact pod the request originated from as long as are current version of Kubernetes is being utilized. Older versions may not show this level of detail in the log output.</p><p>The userAgent value is <code>curl/7.68.0</code>. This field can easily be spoofed which makes it hard to trust that curl was used. However, it can often be used to link events together to understand activity originating from the same actor.</p><p>By using this information, we can infer the request more than likely originated from outside the cluster and the command used to make the request was something similar to this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -k https://&lt;KUBERNETES-API-LOAD-BALANCER-SERVER&gt;/api/v1/secrets
</span></span></code></pre></div><p>Let&rsquo;s take a look at one more log output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=err>annotations:</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>     <span class=err>authorization.k8s.io/decision:</span> <span class=err>forbid</span>
</span></span><span class=line><span class=cl>     <span class=err>authorization.k8s.io/reason:</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=err>apiVersion:</span> <span class=err>audit.k</span><span class=mi>8</span><span class=err>s.io/v</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>   <span class=err>auditID:</span> <span class=mi>4190</span><span class=err>c</span><span class=mi>06</span><span class=err>f</span><span class=mi>-5</span><span class=err>bb</span><span class=mi>4-4654</span><span class=err>-a</span><span class=mi>610-02</span><span class=err>af</span><span class=mi>06</span><span class=err>ac</span><span class=mi>0593</span>
</span></span><span class=line><span class=cl>   <span class=err>kind:</span> <span class=err>Event</span>
</span></span><span class=line><span class=cl>   <span class=err>level:</span> <span class=err>RequestResponse</span>
</span></span><span class=line><span class=cl>   <span class=err>objectRef:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=err>apiVersion:</span> <span class=err>v1</span>
</span></span><span class=line><span class=cl>     <span class=err>namespace:</span> <span class=err>dev</span>
</span></span><span class=line><span class=cl>     <span class=err>resource:</span> <span class=err>pods</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=err>requestReceivedTimestamp:</span> <span class=mi>2022-06-18</span><span class=err>T</span><span class=mi>18</span><span class=err>:</span><span class=mi>50</span><span class=err>:</span><span class=mi>0</span><span class=mf>8.978700</span><span class=err>Z</span>
</span></span><span class=line><span class=cl>   <span class=err>requestURI:</span> <span class=err>/api/v</span><span class=mi>1</span><span class=err>/namespaces/dev/pods?limit=</span><span class=mi>500</span>
</span></span><span class=line><span class=cl>   <span class=err>responseObject:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=err>apiVersion:</span> <span class=err>v1</span>
</span></span><span class=line><span class=cl>     <span class=err>code:</span> <span class=err>403</span>
</span></span><span class=line><span class=cl>     <span class=err>details:</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>       <span class=err>kind:</span> <span class=err>pods</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>     <span class=err>kind:</span> <span class=err>Status</span>
</span></span><span class=line><span class=cl>     <span class=err>message:</span> <span class=err>pods</span> <span class=err>is</span> <span class=err>forbidden:</span> <span class=err>User</span> <span class=s2>&#34;system:serviceaccount:dev:default&#34;</span> <span class=err>cannot</span> <span class=err>list</span> <span class=err>resource</span> <span class=s2>&#34;pods&#34;</span> <span class=err>in</span> <span class=err>API</span> <span class=err>group</span> <span class=s2>&#34;&#34;</span> <span class=err>in</span> <span class=err>the</span> <span class=err>namespace</span> <span class=s2>&#34;dev&#34;</span>
</span></span><span class=line><span class=cl>     <span class=err>metadata:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>     <span class=err>reason:</span> <span class=err>Forbidden</span>
</span></span><span class=line><span class=cl>     <span class=err>status:</span> <span class=err>Failure</span>
</span></span><span class=line><span class=cl>   <span class=err>}</span>
</span></span><span class=line><span class=cl>   <span class=err>responseStatus:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=err>code:</span> <span class=err>403</span>
</span></span><span class=line><span class=cl>     <span class=err>metadata:</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>     <span class=err>reason:</span> <span class=err>Forbidden</span>
</span></span><span class=line><span class=cl>     <span class=err>status:</span> <span class=err>Failure</span>
</span></span><span class=line><span class=cl>   <span class=err>}</span>
</span></span><span class=line><span class=cl>   <span class=err>sourceIPs:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>     <span class=mf>172.20</span><span class=err>.</span><span class=mf>59.66</span>
</span></span><span class=line><span class=cl>   <span class=p>]</span>
</span></span><span class=line><span class=cl>   <span class=err>stage:</span> <span class=err>ResponseComplete</span>
</span></span><span class=line><span class=cl>   <span class=err>stageTimestamp:</span> <span class=mi>2022-06-18</span><span class=err>T</span><span class=mi>18</span><span class=err>:</span><span class=mi>50</span><span class=err>:</span><span class=mi>0</span><span class=mf>8.979502</span><span class=err>Z</span>
</span></span><span class=line><span class=cl>   <span class=err>user:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=err>extra:</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>       <span class=err>authentication.kubernetes.io/pod-name:</span> <span class=err>[</span>
</span></span><span class=line><span class=cl>         <span class=err>nettools</span>
</span></span><span class=line><span class=cl>       <span class=err>]</span>
</span></span><span class=line><span class=cl>       <span class=err>authentication.kubernetes.io/pod-uid:</span> <span class=err>[</span>
</span></span><span class=line><span class=cl>         <span class=err>340ea116-a70a-463c-90e8-f7819acf034f</span>
</span></span><span class=line><span class=cl>       <span class=err>]</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>     <span class=err>groups:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>       <span class=err>system:serviceaccounts</span>
</span></span><span class=line><span class=cl>       <span class=err>system:serviceaccounts:dev</span>
</span></span><span class=line><span class=cl>       <span class=err>system:authenticated</span>
</span></span><span class=line><span class=cl>     <span class=p>]</span>
</span></span><span class=line><span class=cl>     <span class=err>uid:</span> <span class=err>eb</span><span class=mi>04</span><span class=err>ad</span><span class=mi>0</span><span class=err>d</span><span class=mi>-29</span><span class=err>d</span><span class=mi>6-4</span><span class=err>ea</span><span class=mi>0-8</span><span class=err>df</span><span class=mi>5</span><span class=err>-d</span><span class=mi>666</span><span class=err>b</span><span class=mi>26</span><span class=err>eebf</span><span class=mi>9</span>
</span></span><span class=line><span class=cl>     <span class=err>username:</span> <span class=err>system:serviceaccount:dev:default</span>
</span></span><span class=line><span class=cl>   <span class=err>}</span>
</span></span><span class=line><span class=cl>   <span class=err>userAgent:</span> <span class=err>kubectl/v</span><span class=mf>1.24</span><span class=err>.</span><span class=mi>2</span> <span class=err>(linux/amd</span><span class=mi>64</span><span class=err>)</span> <span class=err>kubernetes/f</span><span class=mi>66044</span><span class=err>f</span>
</span></span><span class=line><span class=cl>   <span class=err>verb:</span> <span class=err>list</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></div><p>As we look through the event details, we can see that <code>kubectl</code> was used to query a list of pods within the dev namespace <code>requestURI=/api/v1/namespaces/dev/pods?limit=500</code>. The response was 403 because the service account (found in the user.username field) <code>system:serviceaccount:dev:default</code> does not have permissions to query for a list of pods within the <code>dev</code> namespace. There are some new fields in this event which help us to quickly identify which pod this took place in. Under the user section we see the following snip:</p><p><img loading=lazy src=images/extras.png alt=extras.png title=extras></p><p>The information in the extras section tells us the exact pod that was used. Since we know the pod name as well as the pod-uid it provides us the opportunity to check the Kubernetes server to determine if the pod is still running. If it is, could snapshot the underlying containers in the pod for further analysis.</p><p>Based on the information in the audit log it would appear the command used to create the event was similar to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./kubectl get pods -n dev
</span></span></code></pre></div><p>And if we are lucky enough to have a 3rd part tool such as Falco or some other tool providing runtime detection capabilities we might have an alert such as this one to help confirm and validate our assumptions:</p><pre tabindex=0><code>   output_fields: {
     container.id: eddba1ff1c56
     container.image.repository: docker.io/raesene/alpine-nettools
     container.image.tag: latest
     evt.time: 1655578208694767400
     fd.name: 100.96.1.23:37794-&gt;100.64.0.1:443
     k8s.ns.name: dev
     k8s.pod.name: nettools
     proc.cmdline: kubectl get pods -n dev
   }
   priority: Notice
   rule: Contact K8S API Server From Container
</code></pre><hr><h3 id=kubelet-logs>Kubelet logs<a hidden class=anchor aria-hidden=true href=#kubelet-logs>#</a></h3><p>The kubelet is the control point for all the comings and goings on the node. Each node in the cluster will have a unique set of kubelet logs. Kubelet logs may be helpful when attempting to confirm when a particular container was started or removed. Depending on how it is configured the logs may have a lot of additional information available as well.</p><p><a href=https://docs.openshift.com/container-platform/4.6/rest_api/editing-kubelet-log-level-verbosity.html>This</a> page from RedHat has a handy reference chart for the different log levels available for the kubelet</p><table><thead><tr><th>Log verbosity</th><th>Description</th></tr></thead><tbody><tr><td>&ndash;v=0</td><td>Always visible to an Operator.</td></tr><tr><td>&ndash;v=1</td><td>A reasonable default log level if you do not want verbosity.</td></tr><tr><td>&ndash;v=2</td><td>Useful steady state information about the service and important log messages that might correlate to significant changes in the system. This is the recommended default log level.</td></tr><tr><td>&ndash;v=3</td><td>Extended information about changes.</td></tr><tr><td>&ndash;v=4</td><td>Debug level verbosity.</td></tr><tr><td>&ndash;v=6</td><td>Display requested resources.</td></tr><tr><td>&ndash;v=7</td><td>Display HTTP request headers.</td></tr><tr><td>&ndash;v=8</td><td>Display HTTP request contents.</td></tr></tbody></table><p>At the time of writing kops deploys the kubelet with a default log level of 2 <code>/usr/local/bin/kubelet ... --v=2</code> unless otherwise specified. Below are some sample events that show a container being removed, the <code>nettools</code> pod being removed, and then a few seconds later the <code>nettools</code> pod being created.</p><pre tabindex=0><code>Jun 18 19:42:16 ip-172-20-59-66 kubelet[5656]: {&#34;ts&#34;:1655581336241.7104,&#34;caller&#34;:&#34;topologymanager/scope.go:110&#34;,&#34;msg&#34;:&#34;RemoveContainer&#34;,&#34;v&#34;:0,&#34;containerID&#34;:&#34;9beafc9454c36cf07dec1793128629f2a80bb43ac65aac400458f44d398032a8&#34;}

Jun 18 19:42:16 ip-172-20-59-66 kubelet[5656]: {&#34;ts&#34;:1655581336244.2942,&#34;caller&#34;:&#34;kubelet/kubelet.go:2102&#34;,&#34;msg&#34;:&#34;SyncLoop REMOVE&#34;,&#34;v&#34;:2,&#34;source&#34;:&#34;api&#34;,&#34;pods&#34;:[{&#34;name&#34;:&#34;nettools&#34;,&#34;namespace&#34;:&#34;dev&#34;}]}

Jun 18 19:42:34 ip-172-20-59-66 kubelet[5656]: {&#34;ts&#34;:1655581354264.5642,&#34;caller&#34;:&#34;kubelet/kubelet.go:2092&#34;,&#34;msg&#34;:&#34;SyncLoop ADD&#34;,&#34;v&#34;:2,&#34;source&#34;:&#34;api&#34;,&#34;pods&#34;:[{&#34;name&#34;:&#34;nettools&#34;,&#34;namespace&#34;:&#34;dev&#34;}]}
</code></pre><p>From a responder&rsquo;s point of view, these logs are more than likely not the most helpful but may be a good reference point.</p><hr><h3 id=host-logs--security-tools>host logs / security tools<a hidden class=anchor aria-hidden=true href=#host-logs--security-tools>#</a></h3><p>Most hosts within a Kubernetes cluster are going to be Linux. This means that most if not all of the log sources traditionally used to analyze a Linux host can be used to help paint a picture of what has occurred on a compromised cluster. The same applies to 3rd party security tools. We briefly talked about Falco earlier, but other tools such has ossec, sysmon, osquery, and &lt;$$ VENDOR> can all be used to gain more insights into the malicious activity. Please make sure to understand the limits of the tools though, especially when it comes to paid vendor solutions. A lot of the big players are much stronger in Windows and have gaps in visibility when it comes to *nix systems.</p><hr><h3 id=other-places-for-logs>Other places for logs<a hidden class=anchor aria-hidden=true href=#other-places-for-logs>#</a></h3><p>Depending on how the cluster is configured, and what support applications are being utilized there could be several additional places with valuable log information. Does the cluster use a service mesh, are there proxy containers deployed into every pod for the most part? If so, the proxy containers are great source of logs potentially. If it appears to be a pod or application compromise, do not forget to review the application logs and the logs for the application pod if it is still around.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jellyparks.com/tags/containers/>containers</a></li><li><a href=https://jellyparks.com/tags/linux/>linux</a></li><li><a href=https://jellyparks.com/tags/dfir/>dfir</a></li><li><a href=https://jellyparks.com/tags/kubernetes/>kubernetes</a></li></ul><nav class=paginav><a class=prev href=https://jellyparks.com/posts/k8s-honeypot/><span class=title>« Prev Page</span><br><span>kubernetes_honeypot_adventures</span></a>
<a class=next href=https://jellyparks.com/posts/compromised-container-analysis-primer/><span class=title>Next Page »</span><br><span>compromised_container_analysis_primer</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share kubernetes_logs_for_responders on twitter" href="https://twitter.com/intent/tweet/?text=kubernetes_logs_for_responders&url=https%3a%2f%2fjellyparks.com%2fposts%2fk8s-api-logs-for-responders%2f&hashtags=containers%2clinux%2cdfir%2ckubernetes"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share kubernetes_logs_for_responders on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjellyparks.com%2fposts%2fk8s-api-logs-for-responders%2f&title=kubernetes_logs_for_responders&summary=kubernetes_logs_for_responders&source=https%3a%2f%2fjellyparks.com%2fposts%2fk8s-api-logs-for-responders%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share kubernetes_logs_for_responders on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjellyparks.com%2fposts%2fk8s-api-logs-for-responders%2f&title=kubernetes_logs_for_responders"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share kubernetes_logs_for_responders on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjellyparks.com%2fposts%2fk8s-api-logs-for-responders%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share kubernetes_logs_for_responders on whatsapp" href="https://api.whatsapp.com/send?text=kubernetes_logs_for_responders%20-%20https%3a%2f%2fjellyparks.com%2fposts%2fk8s-api-logs-for-responders%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share kubernetes_logs_for_responders on telegram" href="https://telegram.me/share/url?text=kubernetes_logs_for_responders&url=https%3a%2f%2fjellyparks.com%2fposts%2fk8s-api-logs-for-responders%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://jellyparks.com>JellyParks</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>